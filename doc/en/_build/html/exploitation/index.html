

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Exploitation &mdash; Centreon ESXD 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Centreon ESXD 1.0.0 documentation" href="../index.html" />
    <link rel="prev" title="Installation" href="../installation/index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../installation/index.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Centreon ESXD 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="exploitation">
<h1>Exploitation<a class="headerlink" href="#exploitation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="centreon-esxd-presentation">
<h2>Centreon-esxd Presentation<a class="headerlink" href="#centreon-esxd-presentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="generals-principles">
<h3>Generals Principles<a class="headerlink" href="#generals-principles" title="Permalink to this headline">¶</a></h3>
<p>Centreon-esxd is a Perl program in charged to get back VMWare indicators. This program uses the SDK Perl provided by VMWare in order to connect and get back the informations of one (or more) Virtual Center. To do this, it makes a TCP connection with the VirtualCenter.</p>
<p>By default &#8220;centreon-esxd&#8221; starts at least two processes (named &#8220;handle-client&#8221; and &#8220;handle-vsphere-xxxx&#8221;) :</p>
<dl class="docutils">
<dt><em>«&nbsp;handle-client&nbsp;»</em>:</dt>
<dd><em>Process waiting for requests of &#8220;centron-esx-client.pl&#8221; clients.</em></dd>
</dl>
<p>Steps of operation :</p>
<ul class="simple">
<li>A client connects.</li>
<li>The client ask an monitoring indicator on a VirtualCenter.</li>
<li>The process &#8220;handle-client&#8221; sends the request to process &#8220;handle-vsphere-xxxx&#8221;.</li>
<li>A response is sent by &#8220;handle-vsphere-xxxx&#8221; to &#8220;handle-client&#8221;.</li>
<li>The process &#8220;handle-client&#8221; sends the response to the client.</li>
</ul>
<dl class="docutils">
<dt><em>«&nbsp;handle-vsphere-xxxx&nbsp;»</em>:</dt>
<dd><em>Process responsible to connect and to keep opened a session with the VirtualCenter. To ensure quality performance, a cache of datas description is created.</em></dd>
</dl>
<p>Then, this process gets back the VMWare indicators creating a subprocess per request.</p>
<p>Centreon-esxd necessitates the utilization of one (or more) VirtualCenter. It isn&#8217;t possible to get back informations of an ESX server directly.</p>
<p>This is a example of a fragmented architecture :</p>
<img alt="../_images/archi.png" src="../_images/archi.png" />
</div>
<div class="section" id="operating-mode">
<h3>Operating mode<a class="headerlink" href="#operating-mode" title="Permalink to this headline">¶</a></h3>
<p>The &#8220;centreon-esxd&#8221; program only works in &#8220;daemon&#8221; mode. (dans le sens où il ne peut fournir les indicateurs sans l&#8217;utilisation d&#8217;un client).</p>
<p>Lors de l&#8217;utilisation du plugin <em>centreon_esx_client.pl</em>, on passe des chaînes de caractères qui vont être lier aux différentes librairies dans <em>&#8220;/usr/share/centreon/lib/centreon-esxd&#8221;</em> et qui va être ensuite communiquer au Vcenter qui va au final retourner le résultat au Client. Le client ouvre une liaison TCP avec le serveur pour récolter les informations nécessaires.</p>
</div>
<div class="section" id="configuration-du-connecteur">
<h3>Configuration du connecteur<a class="headerlink" href="#configuration-du-connecteur" title="Permalink to this headline">¶</a></h3>
<p>Le daemon «&nbsp;centreon-esxd&nbsp;» possède un fichier de configuration «&nbsp;centreon_esxd.pm&nbsp;» de la forme suivante&nbsp;:</p>
<div class="highlight-python"><pre>our $libpath = '/usr/share/centreon/lib/centreon-esxd';
our $port = 5700;
our %vsphere_server = ('default' =&gt; {'url' =&gt; 'https://XXXXXX/sdk',
                                   'username' =&gt; 'XXXXX',
                                   'password' =&gt; 'XXXXX'},
                     'testvc' =&gt;  {'url' =&gt; 'https://XXXXXX/sdk',
                                   'username' =&gt; 'XXXXX',
                                   'password' =&gt; 'XXXXXX'}
our $TIMEOUT_VSPHERE = 60;
our $TIMEOUT = 60;
our $TIMEOUT_KILL = 30;
our $REFRESH_KEEPER_SESSION = 15;
# Log Mode: 0 = stdout, 1 = file, 2 = syslog
our $log_mode = 1;
# Criticity: 0 = nothing, 1 = critical, 3 = info
our $log_crit = 1;
# Specify if $log_mode = 2 and CPAN Module Unix::Syslog is installed
our $log_facility;
#our $log_facility = LOG_DAEMON;
our $LOG = "/tmp/centreon_esxd.log";</pre>
</div>
<p>La variable «%vsphere_server&nbsp;» permet de configurer les accès aux différents VirtualCenter. Il est nécessaire d&#8217;avoir au moins l&#8217;entrée &#8216;default&#8217;.</p>
<p>La variable «&nbsp;$port&nbsp;» permet de configurer le port d&#8217;écoute du connecteur «&nbsp;centreon-esxd&nbsp;».</p>
<p>Il est aussi possible de modifier la variable «&nbsp;$log_mode&nbsp;» si vous souhaitez utiliser «&nbsp;syslog&nbsp;» au lieu d&#8217;un fichier à plat.</p>
<p>Il est déconseillé de modifier les variables suivantes&nbsp;: «&nbsp;$REFRESH_KEEPER_SESSION&nbsp;», «&nbsp;$TIMEOUT_KILL&nbsp;», «&nbsp;$ TIMEOUT_VSPHERE&nbsp;» et «&nbsp;$TIMEOUT&nbsp;», car ils sont configurés pour une utilisation optimale.</p>
</div>
</div>
<div class="section" id="optimisation-de-la-configuration-dans-centreon">
<h2>Optimisation de la configuration dans Centreon<a class="headerlink" href="#optimisation-de-la-configuration-dans-centreon" title="Permalink to this headline">¶</a></h2>
<p>Afin d&#8217;exploiter pleinement «&nbsp;centreon-esxd&nbsp;», il est recommandé d&#8217;effectuer une série d&#8217;action préalablement.</p>
<p>Ce connecteur permet la définition de trois modèles d&#8217;hôtes&nbsp;:</p>
<ul class="simple">
<li>le modèle hôte «&nbsp;VMWare-VM&nbsp;»&nbsp;: modèle d&#8217;une machine virtuelle.</li>
<li>le modèle hôte «&nbsp;VMWare-ESX&nbsp;»&nbsp;: modèle d&#8217;un serveur ESX.</li>
<li>le modèle hôte «&nbsp;VMWare-VC&nbsp;»&nbsp;: modèle d&#8217;un virtualCenter (Ce modèle contient notamment des services pour les «&nbsp;datastores&nbsp;»)</li>
</ul>
<p>Tous les plugins de contrôle VMWare ont quelques attributs en commun, qui peuvent être défini dans des modèles afin de simplifier la configuration.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="44%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
<th class="head">Ressource ou la macro doit être défini (recommandé)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>HOSTESXDHOST</td>
<td>Ip ou nom d&#8217;hôte du serveur exécutant le daemon «&nbsp;centreon-esxd&nbsp;»</td>
<td>Modèle d&#8217;hôte VMWare-* de plus bas niveau</td>
</tr>
<tr class="row-odd"><td>HOSTESXDPORT</td>
<td>Port du daemon</td>
<td>Modèle d&#8217;hôte VMWare-* de plus bas niveau</td>
</tr>
<tr class="row-even"><td>HOSTVCNAME</td>
<td>Nom identifiant le VirtualCenter</td>
<td>Modèle d&#8217;hôte VMWare-* de plus bas niveau</td>
</tr>
</tbody>
</table>
<p>Le login et le mot de passe du VirtualCenter se situe directement dans le fichier de configuration «&nbsp;centreon_esxd.pm&nbsp;» qui se situe normalement dans &#8220;<em>/etc/centreon/centreon_esxd.pm</em>&#8221; . Ce système évite la visualisation d&#8217;un mot de passe dans l&#8217;interface «&nbsp;centreon&nbsp;».</p>
<div class="section" id="creation-d-un-modele-d-hote-vmware-generique">
<h3>Création d&#8217;un modèle d&#8217;hôte VMWare générique<a class="headerlink" href="#creation-d-un-modele-d-hote-vmware-generique" title="Permalink to this headline">¶</a></h3>
<p>Aller dans le menu configuration/host/template/, et créer un modèle d&#8217;hôte «&nbsp;VMWare&nbsp;». Ce modèle d&#8217;hôte sera le modèle parent pour les modèles «&nbsp;VMWare-VM&nbsp;», «&nbsp;VMWare-ESX&nbsp;» et «&nbsp;VMWare-VC&nbsp;».</p>
<p>Configurer l&#8217;ensemble des champs comme indiqué dans la documentation Centreon.</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ESXDHOST</td>
<td>Exemple: 10.30.10.30</td>
</tr>
<tr class="row-odd"><td>ESXDPORT</td>
<td>5700 (port par défaut)</td>
</tr>
<tr class="row-even"><td>VCNAME</td>
<td>default</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<p>Il est possible de retrouver des erreurs de ce type dans les «&nbsp;log&nbsp;» de «&nbsp;centreon-esxd&nbsp;»&nbsp;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">...</span><span class="n">SOAP</span> <span class="n">request</span> <span class="n">error</span> <span class="o">-</span> <span class="n">possibly</span> <span class="n">a</span> <span class="n">protocol</span> <span class="n">issue</span><span class="p">:</span> <span class="n">read</span> <span class="n">failed</span><span class="p">:</span> <span class="n">error</span><span class="p">:</span><span class="mi">1408</span><span class="n">F119</span><span class="p">:</span><span class="n">SSL</span> <span class="n">routines</span><span class="p">:</span><span class="n">SSL3_GET_RECORD</span><span class="p">:</span><span class="n">decryption</span> <span class="n">failed</span> <span class="ow">or</span> <span class="n">bad</span> <span class="n">record</span> <span class="n">mac</span><span class="o">...</span>
</pre></div>
</div>
<p>Le SDK Perl VMWare génère cette erreur de temps en temps mais ne bloque pas le fonctionnement du connecteur.</p>
<p>Il est nécessaire de remonter un problème dans le cas d&#8217;un trop grand nombres de déconnexion du daemon au VirtualCenter.</p>
</div>
</div>
<div class="section" id="liste-des-controles">
<h2>Liste des contrôles<a class="headerlink" href="#liste-des-controles" title="Permalink to this headline">¶</a></h2>
<div class="section" id="controles-esx">
<h3>Contrôles ESX<a class="headerlink" href="#controles-esx" title="Permalink to this headline">¶</a></h3>
<div class="section" id="cpu">
<h4>CPU<a class="headerlink" href="#cpu" title="Permalink to this headline">¶</a></h4>
<div class="section" id="fiche-d-identite">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#fiche-d-identite" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_cpuhost</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td>Contrôle le taux d&#8217;utilisation CPU d&#8217;un serveur ESX. Le nombre de métrique renvoyé dépend du nombre de CPUs.</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte un état OK si la métrique «&nbsp;cpu_total&nbsp;» est en dessous du seuil WARNING.</li>
<li>Remonte un état WARNING si la métrique «&nbsp;cpu_total&nbsp;» est en dessous du seuil CRITICAL et au dessus du seuil WARNING.</li>
<li>Remonte un état CRITICAL si la métrique «&nbsp;cpu_total&nbsp;» est au dessus du seuil CRITICAL.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>cpu_total=17.87%;10;90;0;100 cpu0=10.38%;;0;100 cpu1=8.66%;;0;100 cpu2=9.45%;;0;100 cpu3=8.91%;;0;100</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>5/5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="attribut-du-controle">
<h5>Attribut du contrôle<a class="headerlink" href="#attribut-du-controle" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="43%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>cpuhost</td>
</tr>
<tr class="row-odd"><td>-e ou <tt class="docutils literal"><span class="pre">--esx-host</span></tt></td>
<td>Nom du serveur ESX ciblé</td>
<td>esx1.test.fr</td>
</tr>
<tr class="row-even"><td>-w ou <tt class="docutils literal"><span class="pre">--warning</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 80) Seuil warning en pourcentage</td>
<td>75</td>
</tr>
<tr class="row-odd"><td>-c ou <tt class="docutils literal"><span class="pre">--critical</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 90) Seuil critique en pourcentage</td>
<td>90</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">--light-perfdata</span></tt></td>
<td>(optionnel) Permet d&#8217;afficher uniquement la perfdata du CPU total</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="creation-d-un-service-et-ou-modele-de-service">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#creation-d-un-service-et-ou-modele-de-service" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WARNING</td>
<td>80</td>
</tr>
<tr class="row-odd"><td>CRITICAL</td>
<td>90</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="creation-d-une-check-command">
<h5>Création d&#8217;une check command<a class="headerlink" href="#creation-d-une-check-command" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" -e "$HOSTADDRESS$" -u cpuhost --warning $_SERVICEWARNING$ --critical $_SERVICECRITICAL$</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="memoire">
<h4>MEMOIRE<a class="headerlink" href="#memoire" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id1">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_memhost</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td><dl class="first last docutils">
<dt>Contrôle le taux d&#8217;utilisation mémoire d&#8217;un serveur ESX. 3 métriques sont renvoyés&nbsp;:</dt>
<dd><ul class="first last simple">
<li>le taux d&#8217;utilisation mémoire (en octets),</li>
<li>la taille totale de la mémoire (en octets),</li>
<li>la mémoire suralloué par la totalité des VMs (&#8216;overhead&#8217; en octets)</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte un état OK si la métrique «&nbsp;used&nbsp;» est en dessous du seuil WARNING.</li>
<li>Remonte un état WARNING si la métrique «&nbsp;used&nbsp;» est en dessous du seuil CRITICAL et au dessus du seuil WARNING.</li>
<li>Remonte un état CRITICAL si la métrique «&nbsp;used&nbsp;» est au dessus du seuil CRITICAL.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>used=56196403200o;6870586573;61835279155;0;68705865728 size=68705865728o overhead=1773761536o</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>20/5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h5>Attribut du contrôle<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="43%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>memhost</td>
</tr>
<tr class="row-odd"><td>-e ou <tt class="docutils literal"><span class="pre">--esx-host</span></tt></td>
<td>Nom du serveur ESX ciblé</td>
<td>esx1.test.fr</td>
</tr>
<tr class="row-even"><td>-w ou <tt class="docutils literal"><span class="pre">--warning</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 80) Seuil warning en pourcentage</td>
<td>75</td>
</tr>
<tr class="row-odd"><td>-c ou <tt class="docutils literal"><span class="pre">--critical</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 90) Seuil critique en pourcentage</td>
<td>90</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id3">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WARNING</td>
<td>80</td>
</tr>
<tr class="row-odd"><td>CRITICAL</td>
<td>90</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id4">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" -e "$HOSTADDRESS$" -u memhost --warning $_SERVICEWARNING$ --critical $_SERVICECRITICAL$</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="reseau">
<h4>RESEAU<a class="headerlink" href="#reseau" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id5">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_nethost</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td><dl class="first last docutils">
<dt>Contrôle le taux d&#8217;utilisation d&#8217;une interface réseau physique d&#8217;un serveur ESX. 2 métriques sont renvoyés&nbsp;:</dt>
<dd><ul class="first last simple">
<li>le taux d&#8217;utilisation en entrée et sortie (en b/s).</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte un état OK si la(les) métrique(s) «&nbsp;traffic_*&nbsp;» est(sont) en dessous du seuil WARNING.</li>
<li>Remonte un état WARNING si la(les) métrique(s) «&nbsp;traffic_*&nbsp;» est(sont) en dessous du seuil CRITICAL et au dessus du seuil WARNING.</li>
<li>Remonte un état CRITICAL si la(les) métrique(s) «&nbsp;traffic_*&nbsp;» est(sont) au dessus du seuil CRITICAL.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>traffic_in=598016b/s traffic_out=172032b/s</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>5/5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id6">
<h5>Attribut du contrôle<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="43%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>nethost</td>
</tr>
<tr class="row-odd"><td>-e ou <tt class="docutils literal"><span class="pre">--esx-host</span></tt></td>
<td>Nom du serveur ESX ciblé</td>
<td>esx1.test.fr</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">--nic</span></tt></td>
<td>Nom de l&#8217;interface réseau physique</td>
<td>vmnic0</td>
</tr>
<tr class="row-odd"><td>-w ou <tt class="docutils literal"><span class="pre">--warning</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 80) Seuil warning en pourcentage</td>
<td>75</td>
</tr>
<tr class="row-even"><td>-c ou <tt class="docutils literal"><span class="pre">--critical</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 90) Seuil critique en pourcentage</td>
<td>90</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id7">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>NICNAME</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>WARNING</td>
<td>80</td>
</tr>
<tr class="row-even"><td>CRITICAL</td>
<td>90</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id8">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" -e "$HOSTADDRESS$" -u nethost --warning $_SERVICEWARNING$ --critical $_SERVICECRITICAL$ --nic "$_SERVICENICNAME$"</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="swap">
<h4>SWAP<a class="headerlink" href="#swap" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id9">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_swaphost</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td><dl class="first last docutils">
<dt>Contrôle le taux d&#8217;utilisation mémoire d&#8217;un serveur ESX. 2 métriques sont renvoyés&nbsp;:</dt>
<dd><ul class="first last simple">
<li>le taux de lecture et d&#8217;écriture du swap globale de l&#8217;ensemble des machines virtuelles (en Mb/s).</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte un état OK si la(les) métrique(s) «&nbsp;swap_*&nbsp;» est(sont) en dessous du seuil WARNING.</li>
<li>Remonte un état WARNING si la(les) métrique(s) «&nbsp;swap_*&nbsp;» est(sont) en dessous du seuil CRITICAL et au dessus du seuil WARNING.</li>
<li>Remonte un état CRITICAL si la(les) métrique(s) «&nbsp;swap_*&nbsp;» est(sont) au dessus du seuil CRITICAL.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>swap_in=0b/s swap_out=0b/s</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>20/5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id10">
<h5>Attribut du contrôle<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="44%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>swaphost</td>
</tr>
<tr class="row-odd"><td>-e ou <tt class="docutils literal"><span class="pre">--esx-host</span></tt></td>
<td>Nom du serveur ESX ciblé</td>
<td>esx1.test.fr</td>
</tr>
<tr class="row-even"><td>-w ou <tt class="docutils literal"><span class="pre">--warning</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 0.8) Seuil warning en MB/s</td>
<td>0.5</td>
</tr>
<tr class="row-odd"><td>-c ou <tt class="docutils literal"><span class="pre">--critical</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 1) Seuil critique en MB/s</td>
<td>1.5</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id11">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WARNING</td>
<td>0.8</td>
</tr>
<tr class="row-odd"><td>CRITICAL</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id12">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" -e "$HOSTADDRESS$" -u swaphost --warning $_SERVICEWARNING$ --critical $_SERVICECRITICAL$</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="datastores">
<h4>DATASTORES<a class="headerlink" href="#datastores" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id13">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_datastoreshost</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td><dl class="first last docutils">
<dt>Contrôle le taux d&#8217;utilisation d&#8217;une interface réseau physique d&#8217;un serveur ESX. 2 métriques sont renvoyés par le datastore&nbsp;:</dt>
<dd><ul class="first last simple">
<li>la latence totale en lecture et écriture (en ms).</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte un état OK si la(les) métrique(s) est(sont) en dessous du seuil WARNING.</li>
<li>Remonte un état WARNING si la(les) métrique(s) est(sont) en dessous du seuil CRITICAL et au dessus du seuil WARNING.</li>
<li>Remonte un état CRITICAL si la(les) métrique(s) est(sont) au dessus du seuil CRITICAL.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>&#8216;trl_LUN1&#8217;=0.00ms &#8216;twl_LUN1&#8217;=0.00ms &#8216;trl_LUN2&#8217;=0.00ms &#8216;twl_LUN2&#8217;=1.00ms</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>5/5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id14">
<h5>Attribut du contrôle<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="48%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>datastoreshost</td>
</tr>
<tr class="row-odd"><td>-e ou <tt class="docutils literal"><span class="pre">--esx-host</span></tt></td>
<td>Nom du serveur ESX ciblé</td>
<td>esx1.test.fr</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">--filter-datastores</span></tt></td>
<td>(optionnel) Permet de filtrer les datastores à traiter (séparé par des virgules)</td>
<td>LUN1,LUN2</td>
</tr>
<tr class="row-odd"><td>-w ou <tt class="docutils literal"><span class="pre">--warning</span></tt></td>
<td>(optionnel – Défaut&nbsp;: aucunes) Seuil warning en ms</td>
<td>75</td>
</tr>
<tr class="row-even"><td>-c ou <tt class="docutils literal"><span class="pre">--critical</span></tt></td>
<td>(optionnel – Défaut&nbsp;: aucunes) Seuil critique en ms</td>
<td>90</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id15">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WARNING</td>
<td>30</td>
</tr>
<tr class="row-odd"><td>CRITICAL</td>
<td>50</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id16">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" -e "$HOSTADDRESS$" -u datastoreshost --warning $_SERVICEWARNING$ --critical $_SERVICECRITICAL$</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="countvm">
<h4>COUNTVM<a class="headerlink" href="#countvm" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id17">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_countvmhost</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td><dl class="first last docutils">
<dt>Contrôle le taux d&#8217;utilisation mémoire d&#8217;un serveur ESX. 1 métrique est remontée&nbsp;:</dt>
<dd><ul class="first last simple">
<li>le nombre de machines virtuelles allumées.</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte un état OK si la métrique «&nbsp;count&nbsp;» est en dessous du seuil WARNING.</li>
<li>Remonte un état WARNING si la métrique «&nbsp;count&nbsp;» est en dessous du seuil CRITICAL et au dessus du seuil WARNING.</li>
<li>Remonte un état CRITICAL si la métrique «&nbsp;count&nbsp;» est au dessus du seuil CRITICAL.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>count=45</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>20/5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id18">
<h5>Attribut du contrôle<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="44%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>countvmhost</td>
</tr>
<tr class="row-odd"><td>-e ou <tt class="docutils literal"><span class="pre">--esx-host</span></tt></td>
<td>Nom du serveur ESX ciblé</td>
<td>esx1.test.fr</td>
</tr>
<tr class="row-even"><td>-w ou <tt class="docutils literal"><span class="pre">--warning</span></tt></td>
<td>(optionnel – Défaut&nbsp;: aucunes valeurs) Seuil warning en ms</td>
<td>10</td>
</tr>
<tr class="row-odd"><td>-c ou <tt class="docutils literal"><span class="pre">--critical</span></tt></td>
<td>(optionnel – Défaut&nbsp;: aucunes valeurs) Seuil critique en ms</td>
<td>15</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id19">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WARNING</td>
<td>10</td>
</tr>
<tr class="row-odd"><td>CRITICAL</td>
<td>15</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id20">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" -e "$HOSTADDRESS$" -u countvmhost --warning $_SERVICEWARNING$ --critical $_SERVICECRITICAL$</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="health">
<h4>HEALTH<a class="headerlink" href="#health" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id21">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_healthhost</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td>Contrôle l&#8217;état des sondes matériels et processeurs d&#8217;un serveur ESX.</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><dl class="first last docutils">
<dt>Remonte un état selon l&#8217;état des sondes:</dt>
<dd><ul class="first last simple">
<li>&#8220;Yellow&#8221; correspond à WARNING.</li>
<li>&#8220;Red&#8221; correspond à CRITICAL.</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>30/1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id22">
<h5>Attribut du contrôle<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="44%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>healthhost</td>
</tr>
<tr class="row-odd"><td>-e ou <tt class="docutils literal"><span class="pre">--esx-host</span></tt></td>
<td>Nom du serveur ESX ciblé</td>
<td>esx1.test.fr</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id23">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id24">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" -e "$HOSTADDRESS$" -u healthhost</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="maintenance">
<h4>MAINTENANCE<a class="headerlink" href="#maintenance" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id25">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_maintenancehost</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td>Contrôle le mode de maintenance d&#8217;un serveur ESX.</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte l&#8217;état « CRITICAL » si le serveur ESX est en mode de maintenance.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>30/1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id26">
<h5>Attribut du contrôle<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="44%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>maintenancehost</td>
</tr>
<tr class="row-odd"><td>-e ou <tt class="docutils literal"><span class="pre">--esx-host</span></tt></td>
<td>Nom du serveur ESX ciblé</td>
<td>esx1.test.fr</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id27">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id28">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" -e "$HOSTADDRESS$" -u maintenancehost</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="statut">
<h4>STATUT<a class="headerlink" href="#statut" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id29">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_statushost</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td>Contrôle l&#8217;état global d&#8217;un serveur ESX.</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte l&#8217;état « CRITICAL » si le statut du serveur ESX est en « red » .</li>
<li>Remonte l&#8217;état « WARNING » si le statut du serveur ESX est en « yellow » .</li>
<li>Remonte l&#8217;état « UNKNOWN » si le statut du serveur ESX est en « gray » .</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>30/1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id30">
<h5>Attribut du contrôle<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="44%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>statushost</td>
</tr>
<tr class="row-odd"><td>-e ou <tt class="docutils literal"><span class="pre">--esx-host</span></tt></td>
<td>Nom du serveur ESX ciblé</td>
<td>esx1.test.fr</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id31">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id32">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" -e "$HOSTADDRESS$" -u statushost</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
</div>
<div class="section" id="controles-d-une-machine-virtuelle">
<h3>Contrôles d&#8217;une machine virtuelle<a class="headerlink" href="#controles-d-une-machine-virtuelle" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id33">
<h4>CPU<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id34">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_cpuvm</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td>Contrôle le taux d&#8217;utilisation CPU d&#8217;une machine virtuelle. Le nombre de métrique renvoyé dépend du nombre de CPUs.</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte un état OK si la métrique «&nbsp;cpu_total&nbsp;» est en dessous du seuil WARNING.</li>
<li>Remonte un état WARNING si la métrique «&nbsp;cpu_total&nbsp;» est en dessous du seuil CRITICAL et au dessus du seuil WARNING.</li>
<li>Remonte un état CRITICAL si la métrique «&nbsp;cpu_total&nbsp;» est au dessus du seuil CRITICAL.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>cpu_total=0.22%;80;90;0;100 cpu_total_MHz=5.00MHz cpu0_MHz=2.00MHz</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>5/5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id35">
<h5>Attribut du contrôle<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="43%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>cpuvm</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">--vm</span></tt></td>
<td>Nom de la machine virtuelle ciblée</td>
<td>myvmname</td>
</tr>
<tr class="row-even"><td>-w ou <tt class="docutils literal"><span class="pre">--warning</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 80) Seuil warning en pourcentage</td>
<td>75</td>
</tr>
<tr class="row-odd"><td>-c ou <tt class="docutils literal"><span class="pre">--critical</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 90) Seuil critique en pourcentage</td>
<td>90</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id36">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WARNING</td>
<td>80</td>
</tr>
<tr class="row-odd"><td>CRITICAL</td>
<td>90</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id37">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" --vm "$HOSTADDRESS$" -u cpuvm --warning $_SERVICEWARNING$ --critical $_SERVICECRITICAL$</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="id38">
<h4>MEMOIRE<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id39">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_memvm</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td><dl class="first last docutils">
<dt>Contrôle le taux d&#8217;utilisation mémoire d&#8217;une machine virtuelle. 6 métriques sont renvoyés&nbsp;:</dt>
<dd><ul class="first last simple">
<li>«&nbsp;used&nbsp;»&nbsp;: la taille mémoire occupée par la machine virtuelle sur le serveur physique (en octets)</li>
<li>«&nbsp;size&nbsp;»&nbsp;: la taille totale de la mémoire allouée pour la machine virtuelle (en octets)</li>
<li>«&nbsp;overhead&nbsp;»&nbsp;: la mémoire sur-alloué (en octets)</li>
<li>«&nbsp;ballooning&nbsp;», «&nbsp;shared&nbsp;» et «&nbsp;active&nbsp;».</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte un état OK si la métrique «&nbsp;used&nbsp;» est en dessous du seuil WARNING.</li>
<li>Remonte un état WARNING si la métrique «&nbsp;used&nbsp;» est en dessous du seuil CRITICAL et au dessus du seuil WARNING.</li>
<li>Remonte un état CRITICAL si la métrique «&nbsp;used&nbsp;» est au dessus du seuil CRITICAL.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>usage=362747904o;1717986918;1932735283;0;2147483648 size=2147483648o overhead=22743040o ballooning=0o shared=4561920o active=70148096o</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>20/5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id40">
<h5>Attribut du contrôle<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="44%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>memvm</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">--vm</span></tt></td>
<td>Nom de la machine virtuelle ciblée</td>
<td>myvmname</td>
</tr>
<tr class="row-even"><td>-w ou <tt class="docutils literal"><span class="pre">--warning</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 80) Seuil warning en pourcentage</td>
<td>75</td>
</tr>
<tr class="row-odd"><td>-c ou <tt class="docutils literal"><span class="pre">--critical</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 90) Seuil critique en pourcentage</td>
<td>90</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id41">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WARNING</td>
<td>80</td>
</tr>
<tr class="row-odd"><td>CRITICAL</td>
<td>90</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id42">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" --vm "$HOSTADDRESS$" -u memvm --warning $_SERVICEWARNING$ --critical $_SERVICECRITICAL$</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="id43">
<h4>DATASTORES<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id44">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_datastoresvm</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td><dl class="first last docutils">
<dt>Contrôle le taux d&#8217;utilisation des datastores rattachées à une machine virtuelle. 2 métriques sont renvoyés par datastore&nbsp;:</dt>
<dd><ul class="first last simple">
<li>«&nbsp;riops&nbsp;»&nbsp;: le nombre moyen d&#8217;I/O de lectures par seconde</li>
<li>«&nbsp;wiops&nbsp;»&nbsp;: le nombre moyen d&#8217;I/O d&#8217;écritures par seconde</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte un état OK si une métrique est en dessous du seuil WARNING.</li>
<li>Remonte un état WARNING si une métrique est en dessous du seuil CRITICAL et au dessus du seuil WARNING.</li>
<li>Remonte un état CRITICAL si une métrique est au dessus du seuil CRITICAL.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>&#8216;riops_LUN1&#8217;=0.00iops &#8216;wiops_LUN1&#8217;=0.27iops &#8216;riops_LUN2&#8217;=20.00iops &#8216;wiops_LUN2&#8217;=100.2iops</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>5/5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id45">
<h5>Attribut du contrôle<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="48%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>datastoresvm</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">--vm</span></tt></td>
<td>Nom de la machine virtuelle ciblée</td>
<td>myvmname</td>
</tr>
<tr class="row-even"><td>-w ou <tt class="docutils literal"><span class="pre">--warning</span></tt></td>
<td>(optionnel – Défaut&nbsp;: aucunes) Seuil warning en ms</td>
<td>100</td>
</tr>
<tr class="row-odd"><td>-c ou <tt class="docutils literal"><span class="pre">--critical</span></tt></td>
<td>(optionnel – Défaut&nbsp;: aucunes) Seuil critique en ms</td>
<td>150</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id46">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WARNING</td>
<td>100</td>
</tr>
<tr class="row-odd"><td>CRITICAL</td>
<td>150</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id47">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" --vm "$HOSTADDRESS$" -u datastoresvm --warning $_SERVICEWARNING$ --critical $_SERVICECRITICAL$</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="vmtools">
<h4>VMTOOLS<a class="headerlink" href="#vmtools" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id48">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_toolsvm</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td>Contrôle l&#8217;état des VMTools rattachées à une machine virtuelle.</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte l&#8217;état « WARNING » si les VMTools sont &#8216;toolsold&#8217;.</li>
<li>Remonte l&#8217;état « CRITICAL » si les VMTools sont &#8216;toolsnotrunning&#8217; ou &#8216;toolsnotinstalled&#8217;.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>20/1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id49">
<h5>Attribut du contrôle<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="44%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>toolsvm</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">--vm</span></tt></td>
<td>Nom de la machine virtuelle ciblée</td>
<td>myvmname</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id50">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id51">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" --vm "$HOSTADDRESS$" -u toolsvm</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="snapshots">
<h4>SNAPSHOTS<a class="headerlink" href="#snapshots" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id52">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_snapshotvm</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td>Contrôle la présence et/ou la date de création des snapshots rattachées à une machine virtuelle.</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><dl class="first last docutils">
<dt>L&#8217;état dépend des paramètres du plugin&nbsp;:</dt>
<dd><ul class="first last simple">
<li>Si «&nbsp;&#8211;warn&nbsp;» spécifié seul&nbsp;: remonte un état WARNING si un snapshost est présent.</li>
<li>Si «&nbsp;&#8211;crit&nbsp;» spécifié seul&nbsp;: remonte un état CRITICAL si un snapshost est présent.</li>
<li>Si «&nbsp;&#8211;warn&nbsp;» et «&nbsp;&#8211;older XXX&nbsp;»&nbsp;: remonte un état WARNING si un snapshost est présent et la date de création du
snapshot le plus ancien est plus vielle que «&nbsp;temps_courant – XXX&nbsp;»</li>
<li>Si «&nbsp;&#8211;crit&nbsp;» et «&nbsp;&#8211;older XXX&nbsp;»&nbsp;: remonte un état CRITICAL si un snapshost est présent et la date de création du
snapshot le plus ancien est plus vielle que «&nbsp;temps_courant – XXX&nbsp;»</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>20/1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id53">
<h5>Attribut du contrôle<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="52%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>snapshotvm</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">--vm</span></tt></td>
<td>Nom de la machine virtuelle ciblée</td>
<td>myvmname</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">--warn</span></tt></td>
<td>(optionnel) Permet de spécifier un état WARNING</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">--crit</span></tt></td>
<td>(optionnel) Permet de spécifier un état CRITICAL</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">--older</span></tt></td>
<td>(optionnel) le temps en secondes du snaphost le plus vieux par rapport au temps courant</td>
<td>86400 (snapshot vieux de + 1jour)</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id54">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>THRESHOLD</td>
<td><ul class="first last simple">
<li>-warn</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id55">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" --vm "$HOSTADDRESS$" -u snapshotvm $_SERVICETHRESHOLD$</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
</div>
<div class="section" id="controle-d-un-datastore">
<h3>Contrôle d&#8217;un datastore<a class="headerlink" href="#controle-d-un-datastore" title="Permalink to this headline">¶</a></h3>
<div class="section" id="usage">
<h4>USAGE<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id56">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_datastoreusage</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td><dl class="first last docutils">
<dt>Contrôle le taux d&#8217;utilisation d&#8217;un datastore. 2 métriques sont renvoyés&nbsp;:</dt>
<dd><ul class="first last simple">
<li>«&nbsp;used&nbsp;»&nbsp;: l&#8217;espace occupé par le datastore (en octets)</li>
<li>«&nbsp;size&nbsp;»&nbsp;: la taille totale allouée pour le datastore (en octets)</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte un état OK si la métrique «&nbsp;used&nbsp;» est en dessous du seuil WARNING.</li>
<li>Remonte un état WARNING si la métrique «&nbsp;used&nbsp;» est en dessous du seuil CRITICAL et au dessus du seuil WARNING.</li>
<li>Remonte un état CRITICAL si la métrique «&nbsp;used&nbsp;» est au dessus du seuil CRITICAL.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>used=506574405632o;;;0;643976658944 size=643976658944o</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>20/5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id57">
<h5>Attribut du contrôle<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="44%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>datastore-usage</td>
</tr>
<tr class="row-odd"><td>-e ou <tt class="docutils literal"><span class="pre">--esx-host</span></tt></td>
<td>Nom du datastore ciblé</td>
<td>dsname</td>
</tr>
<tr class="row-even"><td>-w ou <tt class="docutils literal"><span class="pre">--warning</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 80) Seuil warning en pourcentage</td>
<td>75</td>
</tr>
<tr class="row-odd"><td>-c ou <tt class="docutils literal"><span class="pre">--critical</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 90) Seuil critique en pourcentage</td>
<td>90</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id58">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DSNAME</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>WARNING</td>
<td>80</td>
</tr>
<tr class="row-even"><td>CRITICAL</td>
<td>90</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id59">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" --datastore "$_SERVICEDSNAME$" -u datastore-usage --warning $_SERVICEWARNING$ --critical $_SERVICECRITICAL$</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
<div class="section" id="datastore-i-o">
<h4>DATASTORE I/O<a class="headerlink" href="#datastore-i-o" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id60">
<h5>Fiche d&#8217;identité<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Nom du plugin</strong></td>
<td>check_merethis_vmware_datastorio</td>
</tr>
<tr class="row-even"><td><strong>Description</strong></td>
<td><dl class="first last docutils">
<dt>Contrôle le taux d&#8217;utilisation (I/O) d&#8217;un datastore. 2 métriques sont renvoyés&nbsp;:</dt>
<dd><ul class="first last simple">
<li>«&nbsp;read_rate&nbsp;»&nbsp;: le taux d&#8217;utilisation moyen en lecture par seconde (en b/s)</li>
<li>«&nbsp;write_rate&nbsp;»&nbsp;: la taille d&#8217;utilisation moyen en écriture par seconde (en b/s)</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><strong>Fonctionnement</strong></td>
<td><ul class="first last simple">
<li>Remonte un état OK si la métrique «&nbsp;used&nbsp;» est en dessous du seuil WARNING.</li>
<li>Remonte un état WARNING si la métrique «&nbsp;used&nbsp;» est en dessous du seuil CRITICAL et au dessus du seuil WARNING.</li>
<li>Remonte un état CRITICAL si la métrique «&nbsp;used&nbsp;» est au dessus du seuil CRITICAL.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><strong>Métriques renvoyées</strong></td>
<td>read_rate=1589248b/s write_rate=14344192b/s</td>
</tr>
<tr class="row-odd"><td><strong>Interval/Retry(min)</strong></td>
<td>5/5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id61">
<h5>Attribut du contrôle<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="44%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribut</th>
<th class="head">Description</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-u</td>
<td>Indicateur à contrôler</td>
<td>datastore-io</td>
</tr>
<tr class="row-odd"><td>-e ou <tt class="docutils literal"><span class="pre">--esx-host</span></tt></td>
<td>Nom du datastore ciblé</td>
<td>dsname</td>
</tr>
<tr class="row-even"><td>-w ou <tt class="docutils literal"><span class="pre">--warning</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 80) Seuil warning en kBps</td>
<td>100</td>
</tr>
<tr class="row-odd"><td>-c ou <tt class="docutils literal"><span class="pre">--critical</span></tt></td>
<td>(optionnel – Défaut&nbsp;: 90) Seuil critique en kBps</td>
<td>200</td>
</tr>
</tbody>
</table>
<p>Le plugin a également besoin des informations sur le daemon «&nbsp;centreon-esxd&nbsp;».</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Comportement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-H</td>
<td>IP ou adresse du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
<tr class="row-odd"><td>-P</td>
<td>(optionnel – Défaut&nbsp;: 5700) Port du serveur hébergeant «&nbsp;centreon-esxd&nbsp;»</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id62">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
</div>
<div class="section" id="id63">
<h5>Création d&#8217;un service et/ou modèle de service<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h5>
<p>Aller dans le menu configuration/service ou template, et créer un service et ou modèle de service (basé sur le modèle de service générique).</p>
<p>Définir les macros suivante&nbsp;:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Macro Name</th>
<th class="head">Macro Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DSNAME</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>WARNING</td>
<td>100</td>
</tr>
<tr class="row-even"><td>CRITICAL</td>
<td>150</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id64">
<h5>Création d&#8217;une check command<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h5>
<p>Afin de simplifier l&#8217;utilisation de ce contrôle, il est recommandé de créer la check command suivante&nbsp;:</p>
<div class="highlight-python"><pre>$USER1$/centreon_esx_client.pl -H "$_HOSTESXDHOST$" -P "$_HOSTESXDPORT$" --vsphere "$_HOSTVCNAME$" --datastore "$_SERVICEDSNAME$" -u datastore-io --warning $_SERVICEWARNING$ --critical $_SERVICECRITICAL$</pre>
</div>
<p>L&#8217;ensemble des attributs sont déjà défini dans le modèle d&#8217;hôte et/ou hôte, et modèle de service et/ou service.</p>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Exploitation</a><ul>
<li><a class="reference internal" href="#centreon-esxd-presentation">Centreon-esxd Presentation</a><ul>
<li><a class="reference internal" href="#generals-principles">Generals Principles</a></li>
<li><a class="reference internal" href="#operating-mode">Operating mode</a></li>
<li><a class="reference internal" href="#configuration-du-connecteur">Configuration du connecteur</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimisation-de-la-configuration-dans-centreon">Optimisation de la configuration dans Centreon</a><ul>
<li><a class="reference internal" href="#creation-d-un-modele-d-hote-vmware-generique">Création d&#8217;un modèle d&#8217;hôte VMWare générique</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#liste-des-controles">Liste des contrôles</a><ul>
<li><a class="reference internal" href="#controles-esx">Contrôles ESX</a><ul>
<li><a class="reference internal" href="#cpu">CPU</a><ul>
<li><a class="reference internal" href="#fiche-d-identite">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#attribut-du-controle">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#creation-d-un-service-et-ou-modele-de-service">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#creation-d-une-check-command">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#memoire">MEMOIRE</a><ul>
<li><a class="reference internal" href="#id1">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id2">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id3">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id4">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reseau">RESEAU</a><ul>
<li><a class="reference internal" href="#id5">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id6">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id7">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id8">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#swap">SWAP</a><ul>
<li><a class="reference internal" href="#id9">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id10">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id11">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id12">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#datastores">DATASTORES</a><ul>
<li><a class="reference internal" href="#id13">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id14">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id15">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id16">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#countvm">COUNTVM</a><ul>
<li><a class="reference internal" href="#id17">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id18">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id19">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id20">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#health">HEALTH</a><ul>
<li><a class="reference internal" href="#id21">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id22">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id23">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id24">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#maintenance">MAINTENANCE</a><ul>
<li><a class="reference internal" href="#id25">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id26">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id27">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id28">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#statut">STATUT</a><ul>
<li><a class="reference internal" href="#id29">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id30">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id31">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id32">Création d&#8217;une check command</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#controles-d-une-machine-virtuelle">Contrôles d&#8217;une machine virtuelle</a><ul>
<li><a class="reference internal" href="#id33">CPU</a><ul>
<li><a class="reference internal" href="#id34">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id35">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id36">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id37">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id38">MEMOIRE</a><ul>
<li><a class="reference internal" href="#id39">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id40">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id41">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id42">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id43">DATASTORES</a><ul>
<li><a class="reference internal" href="#id44">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id45">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id46">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id47">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vmtools">VMTOOLS</a><ul>
<li><a class="reference internal" href="#id48">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id49">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id50">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id51">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#snapshots">SNAPSHOTS</a><ul>
<li><a class="reference internal" href="#id52">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id53">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id54">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id55">Création d&#8217;une check command</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#controle-d-un-datastore">Contrôle d&#8217;un datastore</a><ul>
<li><a class="reference internal" href="#usage">USAGE</a><ul>
<li><a class="reference internal" href="#id56">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id57">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id58">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id59">Création d&#8217;une check command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#datastore-i-o">DATASTORE I/O</a><ul>
<li><a class="reference internal" href="#id60">Fiche d&#8217;identité</a></li>
<li><a class="reference internal" href="#id61">Attribut du contrôle</a></li>
<li><a class="reference internal" href="#id62">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id63">Création d&#8217;un service et/ou modèle de service</a></li>
<li><a class="reference internal" href="#id64">Création d&#8217;une check command</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../installation/index.html"
                        title="previous chapter">Installation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/exploitation/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../installation/index.html" title="Installation"
             >previous</a> |</li>
        <li><a href="../index.html">Centreon ESXD 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Merethis.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>